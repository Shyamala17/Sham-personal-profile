const fetchBtn = document.getElementById("fetchBtn");
const countryInput = document.getElementById("countryInput");
const resultDiv = document.getElementById("result");
const loadingDiv = document.getElementById("loading");

async function fetchCountryInfo() {
  const countryName = countryInput.value.trim();
  if (!countryName) {
    resultDiv.textContent = "⚠️ Please enter a country name.";
    return;
  }

  // Show loading indicator
  loadingDiv.style.display = "block";
  resultDiv.textContent = "";

  try {
    // Fetch data from external API
    const response = await fetch(`https://restcountries.com/v3.1/name/${countryName}`);
    if (!response.ok) throw new Error(`Country not found (status: ${response.status})`);

    // Convert response to JSON
    const data = await response.json();
    const country = data[0];

    // Dynamic rendering: update DOM with API data
    resultDiv.innerHTML = `
      <strong>${country.name.common}</strong><br>
      Capital: ${country.capital ? country.capital[0] : "N/A"}<br>
      Region: ${country.region}<br>
      Population: ${country.population.toLocaleString()}<br>
      Flag: <img src="${country.flags.png}" alt="Flag of ${country.name.common}" width="100">
    `;
  } catch (error) {
    resultDiv.textContent = "❌ Error fetching data: " + error.message;
  } finally {
    // Hide loading indicator
    loadingDiv.style.display = "none";
  }
}

fetchBtn.addEventListener("click", fetchCountryInfo);
